// automatically generated by ECSS
grammar trglang.org.wesnoth.WML with org.eclipse.xtext.common.Terminals

import "http://www.org.srclang/wesnoth/WML" 
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

WMLGrammarElement:
	WMLRoot | WMLMacroCallParameter | WMLKeyValue | WMLValuedExpression;

WMLMacroCallParameter:
	WMLMacroCall | WMLMacroParameter;

WMLRoot:
	{WMLRoot} "WMLRoot" "{" (Expressions+=WMLRootExpression ("," Expressions+=WMLRootExpression)*)? "}";

WMLValuedExpression:
	WMLValue | WMLExpression;

WMLKeyValue:
	WMLValue | WMLMacroCall | WMLArrayCall | WMLLuaCode;

WMLLuaCode:
	{WMLLuaCode} "WMLLuaCode" "{" value=ESTRING? "}";

WMLArrayCall:
	{WMLArrayCall} "WMLArrayCall" "{" (value+=WMLValue ("," value+=WMLValue)*)? "}";

WMLValue:
	{WMLValue} "WMLValue" "{" value=ESTRING? "}";

WMLMacroCall:
	{WMLMacroCall} "WMLMacroCall" name=ID? "{" point=ESTRING? relative=ESTRING? (Parameters+=WMLMacroCallParameter (","
	Parameters+=WMLMacroCallParameter)*)? "}";

WMLExpression:
	WMLRootExpression | WMLKey;

WMLRootExpression:
	WMLTag | WMLMacroDefine | WMLPreprocIF | WMLTextdomain | WMLMacroCall;

WMLMacroParameter:
	MacroTokens | WMLValue;

terminal ESTRING:
	"\"" ("\\" . | !("\\" | "\""))* "\"" | "\'" ("\\" . | !("\\" | "\'"))* "\'";

WMLKey:
	{WMLKey} "WMLKey" name=ID? "{" (values+=WMLKeyValue ("," values+=WMLKeyValue)*)? (eol+=ESTRING ("," eol+=ESTRING)*)?
	"}";

WMLTextdomain:
	{WMLTextdomain} "WMLTextdomain" name=ID? "{" "}";

WMLMacroDefine:
	{WMLMacroDefine} "WMLMacroDefine" name=ID? "{" (Expressions+=WMLValuedExpression (","
	Expressions+=WMLValuedExpression)*)? endName=ESTRING? "}";

WMLPreprocIF:
	{WMLPreprocIF} "WMLPreprocIF" name=ID? "{" (Expressions+=WMLValuedExpression ("," Expressions+=WMLValuedExpression)*)?
	Elses=ESTRING? (ElseExpressions+=WMLValuedExpression ("," ElseExpressions+=WMLValuedExpression)*)? endName=ESTRING?
	"}";

WMLTag:
	{WMLTag} "WMLTag" name=ID? "{" plus=ESTRING? (Expressions+=WMLExpression ("," Expressions+=WMLExpression)*)?
	endName=ESTRING? "}";

MacroTokens:
	{MacroTokens} "MacroTokens" "{" value=ESTRING? "}";

terminal ID:
	"^"? ("a".."z" | "A".."Z" | "_") ("a".."z" | "A".."Z" | "_" | "0".."9")*;